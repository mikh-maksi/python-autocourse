# –†–∞–±–æ—Ç–∞ —Å Groovy-—Å–∫—Ä–∏–ø—Ç–∞–º–∏
**Groovy-—Å–∫—Ä–∏–ø—Ç—ã** - —ç—Ç–æ —Å–∫—Ä–∏–ø—Ç—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ —è–∑—ã–∫–µ Java, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –±–æ—Ç–æ–º –∏ —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏.


## –ú–µ—Å—Ç–æ Groovy-—Å–∫—Ä–∏–ø—Ç–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –±–æ—Ç–∞
–° –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–∞–∑–¥–µ–ª —Å Groovy-—Å–∫—Ä–∏–ø—Ç–∞–º–∏
<img src="./img/start-page.jpg">

## –°–æ–∑–¥–∞–Ω–∏–µ Groovy-—Å–∫—Ä–∏–ø—Ç–∞  
–ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç"  
<img src="./img/create-script.jpg">

1. –í –Ω–∞—á–∞–ª–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —Å—Ç–∞–≤–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞ –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö.
2. –í –æ–ø–∏—Å–∞–Ω–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ–º —Å–º—ã—Å–ª —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞
3. –í—ã–±–∏—Ä–∞–µ–º —Å–æ–±—ã—Ç–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è 

<img src="./img/groovy-create.jpg">

## –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Groovy-—Å–∫—Ä–∏–ø—Ç–æ–≤
–í —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Groovy-—Å–∫—Ä–∏–ø—Ç–∞—Ö —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —à–∏—Ä–æ–∫–∏–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –ø–æ–¥ –¥—Ä—É–≥–æ–π —Ç–µ–≥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç,


## –°–∫—Ä–∏–ø—Ç –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–í –¥–∞–Ω–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –æ–±–Ω—É–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, —É–¥–∞–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
```java
import java.time.*;

def registrationDate = {
    def today = LocalDateTime.now();
        
    return today;
};

//–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∂–∏–∑–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
commonActions.setUserVariable(user, 'pythonCurrentLiveCount', 3); //–°–∫–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∂–∏–∑–Ω–µ–π
commonActions.setUserVariable(user, 'pythonOldLiveCount', 3); //–°–∫–æ–ª—å–∫–æ –∂–∏–∑–Ω–µ–π –±—ã–ª–æ —Ä–∞–Ω—å—à–µ

//–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –±–∞–ª–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
commonActions.setUserVariable(user, 'pythonCurrentScore', 30); //–°–∫–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–∞–ª–ª–æ–≤
commonActions.setUserVariable(user, 'pythonOldScore', 30); //–°–∫–æ–ª—å–∫–æ –±–∞–ª–ª–æ–≤ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ

//–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è brandNewUser. –ï—Å–ª–∏ true - –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤—ã–π
commonActions.setUserVariable(user, 'pythonBrandNewUser', true);

//–°–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π –¥–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ø—Ä–æ—à–µ–ª
commonActions.setUserVariable(user, 'dayNumberDone', 0);
commonActions.setUserVariable(user, 'dayNumberSend', 1);

commonActions.setUserVariable(user, 'regDay', registrationDate());

//–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —è–∑—ã–∫ —Ä—É—Å—Å–∫–∏–π
telegramUser.setLanguageCode('ru');
commonActions.saveTelegramUser(telegramUser);

//–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
def message =
'''
–ê —á—Ç–æ–±—ã —è –º–æ–≥ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É *"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"*.
''';
commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_edu_bot'], 'bottomKeyboard\n–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è=>${requestContact}');

// –°–ë–†–û–° –°–¢–ê–¢–ò–°–¢–ò–ö–ò
//–û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ä–µ—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö –ø–æ Python

def taskIds = [
   'python-ta-string-01',
    'python-ta-string-02',
    'python-ta-string-03',
    'python-ta-string-04',
    'python-ta-string-05',
    'python-ta-string-06',
    'python-ta-string-07'
];

//–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ä–µ—à–µ–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º
commonActions.deleteUserTaskStat(user, taskIds);

//–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤–∏–¥–µ–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º
commonActions.deleteUserVariables(user, taskIds);

//–°–±—Ä–æ—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
commonActions.deleteUserVariable(user, 'openedPythonMarathonSite');
commonActions.deleteUserVariable(user, 'finishedPythonMarathon');
commonActions.deleteUserVariable(user, 'finishPythonMarathonDate');
commonActions.deleteUserVariable(user, 'userRequestedPythonBonus');
```

## –°–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
1. –ü—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É
2. –†–∞—Å—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ (Add score) - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–ª–ª–∞ –∑–∞ –∑–∞–¥–∞—á—É –∫ –∑–Ω–∞—á–µ–Ω–∏—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (pythonCurrentScore)
3. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ–≥–¥–∞ –æ–Ω —Ä–µ—à–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–¥–∞—á—É –≤ –±–ª–æ–∫–µ (–º–µ—Ö–∞–Ω–∏–∑–º - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏, –∫–∞–∫–∞—è –∏–º–µ–Ω–Ω–æ –∑–∞–¥–∞—á–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–π - –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Ä—É—á–Ω—É—é).
4. –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Ç–æ–¥:
```java
    def keyboard =
'''inlineKeyboard
1=>pymarathon_day1_m1_1|2=>pymarathon_day1_m1_2|3=>pymarathon_day1_m1_3|4=>pymarathon_day1_m1_4|5=>pymarathon_day1_m1_5''';
    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot'],keyboard);
```
**message** - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è  
**telegramUser** - –æ–±—ä–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–ª–µ–≥—Ä–∞–º-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–Ω–µ —Å–∫—Ä–∏–ø—Ç–∞)
**sendOrdered** - –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (?)
**botName** - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.
**keyboard** - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π (–Ω–∞–±–æ—Ä–æ–º –∫–Ω–æ–ø–æ–∫)
5. keyboard

```java
def keyboard =
'''inlineKeyboard
1=>pymarathon_day1_m1_1|2=>pymarathon_day1_m1_2|3=>pymarathon_day1_m1_3|4=>pymarathon_day1_m1_4|5=>pymarathon_day1_m1_5''';
```
**1,2,3,4,5** - —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Å–º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫–∏
**pymarathon_day1_m1_1,pymarathon_day1_m1_2,pymarathon_day1_m1_3,pymarathon_day1_m1_4,pymarathon_day1_m1_5** - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–µ true (?) –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–Ω–æ–ø–æ–∫.

1. 
```java
import java.time.*;

//–í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
debug.enable();

//–ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
def tgUserInfo = telegramUser.userId + ' (' + telegramUser.getFullName() + ')';

def taskScore = [:];

//–î–µ–Ω—å 1
taskScore['python-ta-string-01'] = 2;
taskScore['python-ta-string-02'] = 2;
taskScore['python-ta-string-03'] = 2;
taskScore['python-ta-string-04'] = 2;
taskScore['python-ta-string-05'] = 2;
taskScore['python-ta-string-06'] = 2;
taskScore['python-ta-string-07'] = 2;
taskScore['python-ta-string-08'] = 2;

taskScore['python-ta-commands-if-01'] = 2;
taskScore['python-ta-commands-if-02'] = 2;
taskScore['python-ta-commands-if-03'] = 2;
taskScore['python-ta-commands-if-04'] = 2;
taskScore['python-ta-commands-if-05'] = 2;
taskScore['python-ta-commands-if-06'] = 2;
taskScore['python-ta-commands-if-07'] = 2;

taskScore['python-ta-types-01'] = 2;
taskScore['python-ta-types-02'] = 2;
taskScore['python-ta-types-03'] = 2;
taskScore['python-ta-types-04'] = 2;
taskScore['python-ta-types-05'] = 2;
taskScore['python-ta-types-06'] = 2;
taskScore['python-ta-types-07'] = 2;

taskScore['python-ta-string2list-01'] = 2;
taskScore['python-ta-string2list-02'] = 2;
taskScore['python-ta-string2list-03'] = 2;
taskScore['python-ta-string2list-04'] = 2;
taskScore['python-ta-string2list-05'] = 2;
taskScore['python-ta-string2list-06'] = 2;

def msg = taskId;

// commonActions.sendTelegramSimpleTextMessage(msg, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);

//User solved last task - set variable
// if (taskId.equals('python-ta-string-07')) {
//     commonActions.setUserVariable(user, 'finishedPythonMarathon', true);
//     commonActions.setUserVariable(user, 'finishPythonMarathonDate', LocalDateTime.now());
    
//     debug.log(tgUserInfo, '[USER FINISHED PYTHON GAME] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—à–µ–ª –∏–≥—Ä—É');
// }

//Add score
if (taskScore.containsKey(taskId)) {
    def score = taskScore[taskId];
    
    //Set current score
    def currentScore = Integer.parseInt(commonActions.getUserVariable(user, 'pythonCurrentScore', 30));
    currentScore += score;
    
    commonActions.setUserVariable(user, 'pythonCurrentScore', currentScore);
    
    //update oldScore
    commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
}

//Send message after day1
if (taskId.equals('python-ta-string-08')) {
   // commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 1);
    def message =
'''
üëè–Æ–•–£! –ü–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å–∫–∞ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∞! –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!
–¢—ã –∑–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è.

–°–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–∏–¥–µ—Ç –∑–∞–≤—Ç—Ä–∞ –≤ 16:00.


${name}, –∫–∞–∫ –æ—â—É—â–µ–Ω–∏—è?

–û—Ü–µ–Ω–∏ –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 5, –≥–¥–µ:

1 - –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æüôÅ
5 - –æ—á–µ–Ω—å –∫—Ä—É—Ç–æ, —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —Å—É–ø–µ—Ä-–≥–µ—Ä–æ–µ–ºüî•
'''.replace('${name}', telegramUser.getFirstName());
    def keyboard =
'''inlineKeyboard
1=>pymarathon_day1_m1_1|2=>pymarathon_day1_m1_2|3=>pymarathon_day1_m1_3|4=>pymarathon_day1_m1_4|5=>pymarathon_day1_m1_5''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot'], keyboard);
}
//Send message after day2
if (taskId.equals('python-ta-commands-if-07')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 2);
    //–î–æ–±–∞–≤–ª—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –¥–Ω–∏ +1
    //–ß—Ç–æ–±—ã –≤ 16:00 –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–ª–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
    def message = 
    '''
    –ö—Ä—É—Ç–æ! –¢—ã –Ω–∞–±–∏—Ä–∞–µ—à—å –æ–±–æ—Ä–æ—Ç—ã, –∞ —Ç–≤–æ–π –±–æ—Ç —É–∂–µ –Ω–∞—É—á–∏–ª—Å—è —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã start –∏ help, –≤–æ—Ç —ç—Ç–æ –¥–∞üî•
    
    –û—Ç–¥—ã—Ö–∞–π –∏ –≥–æ—Ç–æ–≤—å—Å—è, –≤–µ–¥—å –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –º—ã –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º –µ—â–µ –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. 
    
    –ù–∞ —Å–≤—è–∑–∏!
    ''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);

}

//Send message after day3
if (taskId.equals('python-ta-types-07')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 3);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}


//Send message after day4
if (taskId.equals('python-ta-strings2list-07')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 4);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}

//Send message after day5
if (taskId.equals('python-ta-files-05')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 5);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}


//Send message after day6
if (taskId.equals('python-ta-for2list-01')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 6);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}

//Send message after day7
if (taskId.equals('python-ta-functions-06')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 7);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}


//Send message after day8
if (taskId.equals('python-ta-functions-check-01')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 8);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}


//Send message after day9
if (taskId.equals('python-ta-lists-05')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 9);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}

//Send message after day10
if (taskId.equals('python-ta-lists-count-01')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 10);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}

//Send message after day11
if (taskId.equals('python-ta-dict-01')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 11);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}


//Send message after day12
if (taskId.equals('python-ta-dict-count-01')) {
    //commonActions.setUserVariable(user, 'pythonOldScore', currentScore);
    commonActions.setUserVariable(user, 'dayNumberDone', 12);
    def message = 
    '''
    –ï–ï–ï! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–ª–∞–≤—Éüòá
    
    –ñ–¥–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.
    
    –î–∞–ª—å—à–µ - –±–æ–ª—å—à–µüòâ

''';

    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: telegramUser, sendOrdered: false, botName: 'goiteens_python_bot']);
}
```
## –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–≤ 10:00 - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ)
–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–º—ã–∫–∞–Ω–∏–µ notifyUser, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä **tgUser** (–æ–±—ä–µ–∫—Ç telegramUser, –ø–æ–ª—É—á–∞–µ–º—ã–π "–∏–∑-–∑–∞" —Å–∫—Ä–∏–ø—Ç–∞) –∏ **userData**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ–º –≤ —Å–ø–∏—Å–∫–µ 
```java
//–í—ã–±–∏—Ä–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –Ω–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
def telegramUserQueryParams = [:];
telegramUserQueryParams['tag'] = 'PY_AUTO_COURSE'; // –¢–µ–≥ –¢–µ–ª–µ–≥—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// telegramUserQueryParams['maxRegisterDaysFromNow'] = '28'; //–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–µ —Å—Ç–∞—Ä—à–µ 28 –¥–Ω–µ–π
telegramUserQueryParams['idIs'] = '394735340'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å
// telegramUserQueryParams['phoneIs'] = '380997852751'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å

def telegramUsers = commonActions.getTelegramUsersWithAllConditions(telegramUserQueryParams);

def telegramUsersData = commonActions.getAggregatedDataForTelegramUsers(telegramUsers);

for(telegramUser in telegramUsers) {
    def userData = telegramUsersData.getOrDefault(telegramUser.userId, null);
    try {
            notifyUser(telegramUser, userData); //–û–ø–æ–≤–µ—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        
    } catch(ex) {
        debug.log(ex, telegramUser);
    }
}
```
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –ø–æ–ª—É—á–∞–µ–º –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ get –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ `telegramUsersData`, –∫–æ—Ç–æ—Ä—ã–π, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ–ª—É—á–∞–µ–º –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
```java
def telegramUserQueryParams = [:];
telegramUserQueryParams['tag'] = 'PY_AUTO_COURSE'; // –¢–µ–≥ –¢–µ–ª–µ–≥—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// telegramUserQueryParams['maxRegisterDaysFromNow'] = '28'; //–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–µ —Å—Ç–∞—Ä—à–µ 28 –¥–Ω–µ–π
telegramUserQueryParams['idIs'] = '394735340'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å
// telegramUserQueryParams['phoneIs'] = '380997852751'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å
def telegramUsers = commonActions.getTelegramUsersWithAllConditions(telegramUserQueryParams);

def telegramUsersData = commonActions.getAggregatedDataForTelegramUsers(telegramUsers);

...

 def userData1 = telegramUsersData.get(tgUser.userId);

    def dayNumberDone = Integer.parseInt(userData1.variables.getOrDefault('dayNumberDone', 0));
    def dayNumberSend = Integer.parseInt(userData1.variables.getOrDefault('dayNumberSend', 1));  

...
```

```java
import java.time.*;

//–í–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–∫—É
debug.enable();

commonActions.setUserVariable(user, 'dayNumberSend', 0);


//–í—ã–±–∏—Ä–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –Ω–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
def telegramUserQueryParams = [:];
telegramUserQueryParams['tag'] = 'PY_AUTO_COURSE'; // –¢–µ–≥ –¢–µ–ª–µ–≥—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// telegramUserQueryParams['maxRegisterDaysFromNow'] = '28'; //–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–µ —Å—Ç–∞—Ä—à–µ 28 –¥–Ω–µ–π
telegramUserQueryParams['idIs'] = '394735340'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å
// telegramUserQueryParams['phoneIs'] = '380997852751'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å

def telegramUsers = commonActions.getTelegramUsersWithAllConditions(telegramUserQueryParams);
debug.log('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–æ–≤–µ—â–∞–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ' + telegramUsers.size());

//–ï—Å–ª–∏ –Ω–µ–∫–æ–≥–æ –æ–ø–æ–≤–µ—â–∞—Ç—å - –Ω–µ –æ–ø–æ–≤–µ—â–∞–µ–º
if (telegramUsers.size() <= 0) {
    return;
}

def telegramUsersData = commonActions.getAggregatedDataForTelegramUsers(telegramUsers);

def currentScore = Integer.parseInt(commonActions.getUserVariable(user, 'pythonCurrentScore', 20));

def daySend = 0;
//def marathonDay = commonActions.getUserVariable(user, 'dayNumberDone', 0)
// –ó–∞–º—ã–∫–∞–Ω–∏–µ - –æ–ø–æ–≤–µ—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á—Ç–æ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏ —Ç–∞–∫–æ–≥–æ-—Ç–æ –¥–Ω—è
def notifyUser = {tgUser, userData -> 
    def marathonDay = 0 //–ß–∏—Ç–∞—Ç—å –¥–µ–Ω—å –º–∞—Ä–∞—Ñ–æ–Ω–∞ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏/–∏–ª–∏ –∏–∑ –¥–∞—Ç—ã —Å—Ç–∞—Ä—Ç–∞
    
    def userData1 = telegramUsersData.get(tgUser.userId);
    if (userData1 == null) {
        return -1;
    }
    
    def dayNumberDone = Integer.parseInt(userData1.variables.getOrDefault('dayNumberDone', 0));
    def dayNumberSend = Integer.parseInt(userData1.variables.getOrDefault('dayNumberSend', 1));    
    
    def blockHashes = ['0':'ijklmno156','1':'jklmnop157','2':'klmnop6158','3':'op67892162','4':'nop6789161','5':'p678923163','6':'mnop678160','7':'6789234164','8':'lmnop67159','9':'7892345165','10':'892345q166','11':'92345qr167'];

    def blockHash = blockHashes[dayNumberSend + ''];

    def token = userData.user.token;
    
    def taskNumber = dayNumberSend;
    
    def buttonName = "–ù–ê–ü–û–ú–ù–ò–ú –ó–ê–î–ê–ù–ò–ï ${taskNumber}";

    def solveTasksLink = "https://goit.ua/python-marathon-autocheck/?token=${token}&block=${blockHash}";
    def keyboard = "inlineKeyboard\n${buttonName}=>${solveTasksLink}";
    

    def defaultMessage = ""

    def message = "";
    if (dayNumberDone < dayNumberSend){
        message = "–ü—Ä–∏–≤–µ—Ç! –ú—ã –≤–∏–¥–∏–º, —á—Ç–æ —Ç—ã –µ—â–µ –Ω–µ —É—Å–ø–µ–ª —Å–¥–µ–ª–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ. –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Ç–µ–±–µ –ø—Ä–∏–π–¥–µ—Ç —Å–µ–≥–æ–¥–Ω—è –≤ 16:00"
        commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: tgUser, sendOrdered: false, botName: 'goiteens_python_bot'], keyboard);
    }
    else{
        message = "–ü—Ä–∏–≤–µ—Ç! –ö—Ä—É—Ç–æ, —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª –ø—Ä–æ—à–ª–æ–µ –∑–∞–¥–∞–Ω–∏–µ. –ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Ç–µ–±–µ –ø—Ä–∏–π–¥–µ—Ç —Å–µ–≥–æ–¥–Ω—è –≤ 16:00"
        commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: tgUser, sendOrdered: false, botName: 'goiteens_python_bot']);
    }
}

//–ü—Ä–æ–±–µ–≥–∞–µ–º—Å—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
for(telegramUser in telegramUsers) {
    def userData = telegramUsersData.getOrDefault(telegramUser.userId, null);
    def tgUserId = telegramUser.userId;
    def tgUserInfo = telegramUser.userId + ' (' + telegramUser.getFullName() + ')';
//    def marathonDay1 = Integer.parseInt(commonActions.getUserVariable(user, 'dayNumberDone', 3));



//    debug.log(tgUserInfo, marathonDay1);


    if (userData == null) {
        debug.log(tgUserInfo, '[WARNING] No user data');
        continue;
    }
    
    //–°–º–æ—Ç—Ä–∏–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–ø–æ–≤–µ—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å
    try {
            notifyUser(telegramUser, userData); //–û–ø–æ–≤–µ—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        
    } catch(ex) {
        debug.log(ex, telegramUser);
    }
}
```

## –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–∞–Ω–¥—ã
–õ—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```java

import java.time.*;

//–í–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–∫—É
debug.enable();

//–°—Å—ã–ª–∫–∏ –Ω–∞ —á–∞—Ç—ã
def chatLinks = commonActions.getJsonPref('pythonGame').chatLinks;
// [
//     '2020-11-23': 'https://t.me/joinchat/NvnDERsVf-7-9GobIGqG6w',
//     '2020-12-07': 'https://t.me/joinchat/NvnDERwX5pCzuhYuaWh0Sw',
//     '2020-12-14': 'https://t.me/joinchat/NvnDERwTT4NXa5iHoEkeFw'
// ];


//–í—ã–±–∏—Ä–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –Ω–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
def telegramUserQueryParams = [:];
telegramUserQueryParams['tag'] = 'PY-TA'; // –¢–µ–≥ –¢–µ–ª–µ–≥—Ä–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
//telegramUserQueryParams['maxRegisterDaysFromNow'] = '28'; //–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–µ —Å—Ç–∞—Ä—à–µ 28 –¥–Ω–µ–π
 telegramUserQueryParams['idIs'] = '394735340'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å
// telegramUserQueryParams['phoneIs'] = '380997852751'; //–î–ï–ë–ê–ì - —Ç–æ–ª—å–∫–æ –º–Ω–µ —Å–ª–∞—Ç—å

def telegramUsers = commonActions.getTelegramUsersWithAllConditions(telegramUserQueryParams);
debug.log('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–æ–≤–µ—â–∞–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ' + telegramUsers.size());

//–ï—Å–ª–∏ –Ω–µ–∫–æ–≥–æ –æ–ø–æ–≤–µ—â–∞—Ç—å - –Ω–µ –æ–ø–æ–≤–µ—â–∞–µ–º
if (telegramUsers.size() <= 0) {
    return;
}

def telegramUsersData = commonActions.getAggregatedDataForTelegramUsers(telegramUsers);

//–ó–∞–º—ã–∫–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è –º–∞—Ä–∞—Ñ–æ–Ω–∞
//def getMarathonDay = commonActions.getUserVariable(user, 'dayNumberDone', '0');
// –ó–∞–º—ã–∫–∞–Ω–∏–µ - –æ–ø–æ–≤–µ—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á—Ç–æ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏ —Ç–∞–∫–æ–≥–æ-—Ç–æ –¥–Ω—è
def notifyUser = {tgUser, userData -> 
    def chatLink = chatLinks[userData.variables.get('pyGameStartDate')];

    def marathonDay =  commonActions.getUserVariable(user, 'dayNumberDone', '0');

    def blockHashes = ['1': '892345q94', '2': 'mnop67852', '3': '345qrst97'];

    def blockHash = blockHashes[marathonDay + ''];
    def token = userData.user.token;
    
    def buttonName = "${marathonDay}-–π –¥–µ–Ω—å –∏–≥—Ä—ã";

    def solveTasksLink = "https://goit.ua/python-marathon-autocheck/?token=${token}&block=${blockHash}";
    def keyboard = "inlineKeyboard\n${buttonName}=>${solveTasksLink}";
    
    def messages = [:];
    messages['1'] =
'''
–ü—Ä–∏–≤–µ—Ç, ${name} üëã
–ì–æ—Ç–æ–≤—ã —Å—ã–≥—Ä–∞—Ç—å?üöÄ –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

*–ù–∞–ø–æ–º–Ω–∏–º: –≤—ã - –±—É–¥—É—â–∏–π —Å—Ç–∞—Ä—Ç–∞–ø–µ—Ä.*üòé –í—ã –ø—Ä–∏–¥—É–º–∞–ª–∏ –∫—Ä—É—Ç—É—é –∏–¥–µ—é, —Å–ø–æ—Å–æ–±–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –º–∏—Ä. –í—ã –Ω–∞—à–ª–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏ —Ç–µ–ø–µ—Ä—å *–≤–∞—à–∞ —Ü–µ–ª—å - —Å–æ–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –º–µ—á—Ç—ã* –∏–∑ —Ç—ã—Å—è—á –ø—Ä–µ—Ç–µ–Ω–¥–µ–Ω—Ç–æ–≤ –∏ –ø–æ–∫–∞–∑–∞—Ç—å –µ–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å–≥–∏. üí™

–ß—Ç–æ–±—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –∑–∞–¥–∞—á–µ–π, –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞—Ç—å *—Å–≤–æ—é CRM-—Å–∏—Å—Ç–µ–º—É* - —ç–¥–∞–∫—É—é –ø—Ä–æ–∫–∞—á–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å–Ω—É—é –∫–Ω–∏–∂–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å—á–∏—Ç–∞–µ—Ç –≤—Å–µ —Å–∞–º–∞.üî•

–°–µ–≥–æ–¥–Ω—è –≤–∞—Å –∂–¥–µ—Ç —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è: –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–∫–∞—Ç—å –∏ –Ω–∞–π–¥–µ—Ç–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, —É–≤–æ–ª–∏—Ç–µ –≤—Å—é –∫–æ–º–∞–Ω–¥—É, –Ω–æ –ø–æ—Ç–æ–º –≤—Å–µ –∂–µ —Å–¥–µ–ª–∞–µ—Ç–µ –ø–µ—Ä–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞... –∏ —ç—Ç–æ –≤—Å–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–∑—É—á–µ–Ω–∏—è *—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —è–∑—ã–∫–∞ Python*.üòé 

*–ù–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —É –≤–∞—Å –±—É–¥–µ—Ç 3 –¥–Ω—è = 3 –∂–∏–∑–Ω–∏* üëå 
–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å *—Å—Å—ã–ª–∫–∞ –Ω–∞ –±–ª–æ–∫ –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ 18:00* —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è. –ù–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ - –∂–∏–∑–Ω–∏ —Å–≥–æ—Ä–∞—é—Ç. 

*–ï—Å–ª–∏ —Å–≥–æ—Ä—è—Ç –≤—Å–µ - Game over*, –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ üôå

–ü–æ—ç—Ç–æ–º—É –æ—Ç–Ω–µ—Å–∏—Ç–µ—Å—å #–ø–æ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –∫ *–¥–µ–¥–ª–∞–π–Ω—É –∏ —Ä–µ—à–µ–Ω–∏—é –∑–∞–¥–∞—á*. –ê –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã - –ø–∏—à–∏—Ç–µ –∏—Ö –≤ —á–∞—Ç üëâ [${chatLink}]  üî•

*–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å* —É–∂–µ –∂–¥–µ—Ç –≤–∞—Å –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ.üëá –£—Å–ø–µ—Ö–æ–≤üôÉ
''';
    messages['2'] =
'''
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ *–≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å –∑–∞–¥–∞—á* üòé –°–µ–≥–æ–¥–Ω—è –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Å –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ Pythonüí™: –∫–ª–∞—Å—Å–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –ø–æ–ª—è–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º; –ê —Ç–∞–∫–∂–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å —Ä–∞–∑–≤–∏—Ç–∏—è —Å—Ç–∞—Ä—Ç–∞–ø–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Cust Dev.
–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ –∏ –ø–æ–≥–Ω–∞–ª–∏. –ù–∞–ø–æ–º–Ω—é, —á—Ç–æ –∑–∞–∫–æ–Ω—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –Ω—É–∂–Ω–æ *–¥–æ –∑–∞–≤—Ç—Ä–∞, 18:00*, –∏–Ω–∞—á–µ —Å–≥–æ—Ä–∏—Ç –∂–∏–∑–Ω—å üôå 

P.S. –ó–∞–∫–æ–Ω—á–∏—Ç–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ—à–ª–æ–≥–æ –¥–Ω—è, –µ—Å–ª–∏ –≤—ã –Ω–µ —É—Å–ø–µ–ª–∏ —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å, –ø—Ä–µ–∂–¥–µ, —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –Ω–æ–≤—ã–º üëå
''';
    messages['3'] =
'''
*–í—ã –ø–æ—á—Ç–∏ —É —Ü–µ–ª–∏* ü§©

–°–µ–≥–æ–¥–Ω—è —Ç—Ä–µ—Ç–∏–π –¥–µ–Ω—å –∏–≥—Ä—ã üî• –ò–Ω–≤–µ—Å—Ç–æ—Ä —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ - *–ø—Ä–æ–µ–∫—Ç –º–µ—á—Ç—ã –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –Ω–∞ —Ä—ã–Ω–æ–∫!* –†–µ—à–∞–π—Ç–µ –∑–∞–¥–∞—á–∏ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ. –î–µ–¥–ª–∞–π–Ω - *–¥–æ –∑–∞–≤—Ç—Ä–∞, 18:00*. 

–ó–∞–≤—Ç—Ä–∞ —É –Ω–∞—Å –∑–∞–≤–µ—Ä—à–∞—é—â–∏–π –¥–µ–Ω—å –∏–≥—Ä—ã - *–ø—Ä–æ–≤–µ–¥–µ–º –∑–∞–Ω—è—Ç–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≤–µ–±–∏–Ω–∞—Ä–∞ –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ*, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç *—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º Python, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É—Å–ø–µ–ª–∏ –≤—ã—É—á–∏—Ç—å* üöÄ

P.S. –ù–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ –µ—Å–ª–∏ —É –≤–∞—Å –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∑–∞ –ø—Ä–æ—à–ª—ã–π –¥–µ–Ω—å, –∑–∞–∫–æ–Ω—á–∏—Ç–µ, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –Ω–æ–≤—ã–º. –£—Å–ø–µ—Ö–æ–≤ üòé
''';
    
    def message = messages[marathonDay + ''].replace('${name}', tgUser.firstName).replace('${chatLink}', chatLink);
    commonActions.sendTelegramSimpleTextMessage(message, [telegramUser: tgUser, sendOrdered: false, botName: 'GoITeens_Python_autocourse_bot'], keyboard);
}

//–ó–∞–º—ã–∫–∞–Ω–∏–µ - –¥–æ–ª–∂–Ω—ã –ª–∏ –º—ã —Å–ø–∏—Å–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∂–∏–∑–Ω—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è –º–∞—Ä–∞—Ñ–æ–Ω–∞, –∏ —Ä–µ—à–µ–Ω–Ω–æ–π –∏–º –∑–∞–¥–∞—á–∏
def shouldNotifyUser = {tgUser, userData ->
    def marathonDay = (int) commonActions.getUserVariable(user, 'dayNumberDone', '0');
    
    //–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –ª–∏—à—å –≤ 1, 2, –∏ 3-–π –¥–Ω–∏
    return marathonDay == 1 || marathonDay == 2 || marathonDay == 3;
}

//–ü—Ä–æ–±–µ–≥–∞–µ–º—Å—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
for(telegramUser in telegramUsers) {
    def userData = telegramUsersData.getOrDefault(telegramUser.userId, null);
    def tgUserId = telegramUser.userId;
    def tgUserInfo = telegramUser.userId + ' (' + telegramUser.getFullName() + ')';

    if (userData == null) {
        debug.log(tgUserInfo, '[WARNING] No user data');
        continue;
    }
    
    //–°–º–æ—Ç—Ä–∏–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–ø–æ–≤–µ—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å
    try {
        if (shouldNotifyUser(telegramUser, userData)) {
            notifyUser(telegramUser, userData); //–û–ø–æ–≤–µ—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        }
    } catch(ex) {
        debug.log(ex, telegramUser);
    }
}





```

## –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è
1. –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
2. –ö–∞–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑—è–ª –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ –∑–∞–¥–∞—á–µ?
3. –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –Ω–∞ –∫–Ω–æ–ø–∫—É –∏–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–∏–ª –∫–æ–Ω—Ç–∞–∫—Ç"
4. –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Å–æ–±—ã—Ç–∏–µ–º "–ü—Ä–∏—à–µ–ª API –∑–∞–ø—Ä–æ—Å" (–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–µ–ª, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å)